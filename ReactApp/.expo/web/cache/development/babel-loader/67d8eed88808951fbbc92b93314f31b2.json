{"ast":null,"code":"import _toConsumableArray from \"@babel/runtime/helpers/toConsumableArray\";\nimport _classCallCheck from \"@babel/runtime/helpers/classCallCheck\";\nimport _createClass from \"@babel/runtime/helpers/createClass\";\nimport _inherits from \"@babel/runtime/helpers/inherits\";\nimport _possibleConstructorReturn from \"@babel/runtime/helpers/possibleConstructorReturn\";\nimport _getPrototypeOf from \"@babel/runtime/helpers/getPrototypeOf\";\nvar _jsxFileName = \"/Users/bartoszwlodarski/ReactApp/ReactApp/App.js\";\n\nfunction _createSuper(Derived) { var hasNativeReflectConstruct = _isNativeReflectConstruct(); return function _createSuperInternal() { var Super = _getPrototypeOf(Derived), result; if (hasNativeReflectConstruct) { var NewTarget = _getPrototypeOf(this).constructor; result = Reflect.construct(Super, arguments, NewTarget); } else { result = Super.apply(this, arguments); } return _possibleConstructorReturn(this, result); }; }\n\nfunction _isNativeReflectConstruct() { if (typeof Reflect === \"undefined\" || !Reflect.construct) return false; if (Reflect.construct.sham) return false; if (typeof Proxy === \"function\") return true; try { Boolean.prototype.valueOf.call(Reflect.construct(Boolean, [], function () {})); return true; } catch (e) { return false; } }\n\nimport React, { Component } from 'react';\nimport StyleSheet from \"react-native-web/dist/exports/StyleSheet\";\nimport TouchableOpacity from \"react-native-web/dist/exports/TouchableOpacity\";\nimport Text from \"react-native-web/dist/exports/Text\";\nimport View from \"react-native-web/dist/exports/View\";\n\nvar App = function (_Component) {\n  _inherits(App, _Component);\n\n  var _super = _createSuper(App);\n\n  function App() {\n    var _this;\n\n    _classCallCheck(this, App);\n\n    for (var _len = arguments.length, args = new Array(_len), _key = 0; _key < _len; _key++) {\n      args[_key] = arguments[_key];\n    }\n\n    _this = _super.call.apply(_super, [this].concat(args));\n    _this.state = {\n      endgame: false,\n      move: \"O\",\n      board: new Array(9),\n      result: \"\",\n      message: \"\",\n      pattern: Array(0)\n    };\n    _this.WinConditions = [[0, 1, 2], [3, 4, 5], [6, 7, 8], [0, 3, 6], [1, 4, 7], [2, 5, 8], [0, 4, 8], [2, 4, 6]];\n    _this.tmpBoard = [null, null, null, null, null, null, null, null, null];\n\n    _this.updateBoard = function () {\n      _this.setState({\n        board: _this.tmpBoard\n      });\n    };\n\n    _this.isWinner = function (board, move) {\n      for (var i = 0; i < 8; i++) {\n        console.log(\"Condition nr \", i, _this.WinConditions[i]);\n        var allConds = true;\n\n        for (var j = 0; j < 3; j++) {\n          var p = _this.WinConditions[i][j];\n\n          if (board[p] !== move) {\n            allConds = false;\n            break;\n          }\n        }\n\n        if (allConds) {\n          console.log(\"Win condition: \" + i);\n          return _this.WinConditions[i];\n        }\n      }\n\n      return false;\n    };\n\n    _this.isDraw = function (board) {\n      for (var i = 0; i < board.length; i++) {\n        if (!board[i]) return false;\n      }\n\n      return true;\n    };\n\n    _this.isEndGame = function (board, move) {\n      var pattern = _this.isWinner(board, move);\n\n      if (pattern) {\n        _this.setState({\n          endgame: true,\n          pattern: pattern\n        });\n\n        if (move == \"O\") _this.setState({\n          endgame: true,\n          result: \"win\",\n          message: \"You win!\"\n        });else _this.setState({\n          endgame: true,\n          result: \"loss\",\n          message: \"You lost!\"\n        });\n        return true;\n      } else if (_this.isDraw(board)) _this.setState({\n        endgame: true,\n        result: \"draw\",\n        message: \"You draw!\"\n      });else return false;\n    };\n\n    _this.botMove = function () {\n      console.log(\"Bot move board:\");\n      console.log(_this.tmpBoard);\n      var legalMoves = Array();\n      var loseThreads = Array();\n\n      for (var i = 0; i < 9; i++) {\n        if (!_this.tmpBoard[i]) {\n          var board = _toConsumableArray(_this.tmpBoard);\n\n          board[i] = \"X\";\n\n          if (_this.isWinner(board, \"X\")) {\n            _this.tmpBoard[i] = \"X\";\n            return;\n          }\n\n          board[i] = \"O\";\n\n          if (_this.isWinner(board, \"O\")) {\n            loseThreads.push(i);\n          }\n\n          legalMoves.push(i);\n        }\n      }\n\n      var move = legalMoves[Math.floor(Math.random() * legalMoves.length)];\n      if (loseThreads.length > 0) move = loseThreads[Math.floor(Math.random() * loseThreads.length)];\n      _this.tmpBoard[move] = \"X\";\n    };\n\n    _this.onPress = function (pos) {\n      if (!_this.state.endgame && !_this.state.board[pos] && _this.state.move == \"O\") {\n        _this.tmpBoard[pos] = \"O\";\n\n        if (_this.isEndGame(_this.tmpBoard, \"O\")) {\n          _this.updateBoard();\n\n          return;\n        }\n\n        _this.botMove();\n\n        _this.updateBoard();\n\n        _this.isEndGame(_this.tmpBoard, \"X\");\n      }\n    };\n\n    return _this;\n  }\n\n  _createClass(App, [{\n    key: \"renderMessage\",\n    value: function renderMessage() {\n      if (this.state.endgame) return React.createElement(Text, {\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 135,\n          columnNumber: 15\n        }\n      }, this.state.message);else {\n        return React.createElement(Text, {\n          __self: this,\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 138,\n            columnNumber: 14\n          }\n        }, \"Move: \", this.state.move);\n      }\n      return null;\n    }\n  }, {\n    key: \"renderBoard\",\n    value: function renderBoard() {\n      var _this2 = this;\n\n      var boxes = [];\n\n      var _loop = function _loop(i) {\n        boxes.push(React.createElement(TouchableOpacity, {\n          style: [styles.box, _this2.state.result == \"win\" && i in _this2.state.pattern ? styles.box_win : null, _this2.state.result == \"loss\" && i in _this2.state.pattern ? styles.box_loss : null],\n          onPress: function onPress() {\n            return _this2.onPress(i);\n          },\n          __self: _this2,\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 148,\n            columnNumber: 11\n          }\n        }, React.createElement(Text, {\n          style: styles.box_text,\n          __self: _this2,\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 152,\n            columnNumber: 13\n          }\n        }, _this2.state.board[i])));\n      };\n\n      for (var i = 0; i < 9; i++) {\n        _loop(i);\n      }\n\n      return React.createElement(View, {\n        style: styles.game_board,\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 158,\n          columnNumber: 12\n        }\n      }, boxes);\n    }\n  }, {\n    key: \"render\",\n    value: function render() {\n      return React.createElement(View, {\n        style: styles.container,\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 163,\n          columnNumber: 7\n        }\n      }, React.createElement(View, {\n        style: styles.title,\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 164,\n          columnNumber: 9\n        }\n      }, React.createElement(Text, {\n        style: styles.title_text,\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 165,\n          columnNumber: 11\n        }\n      }, \"TicTacToe\")), React.createElement(View, {\n        style: styles.message,\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 168,\n          columnNumber: 9\n        }\n      }, this.renderMessage()), this.renderBoard());\n    }\n  }]);\n\n  return App;\n}(Component);\n\nvar styles = StyleSheet.create({\n  container: {\n    justifyContent: 'center',\n    alignItems: 'center'\n  },\n  title: {\n    marginTop: 10,\n    paddingTop: 50,\n    height: 100\n  },\n  title_text: {\n    fontSize: 50,\n    fontWeight: \"700\"\n  },\n  game_board: {\n    flexWrap: \"wrap\",\n    flexDirection: \"row\",\n    backgroundColor: \"aliceblue\",\n    maxHeight: 360,\n    marginTop: 100,\n    maxWidth: 360,\n    alignContent: 'center',\n    borderRadius: 10\n  },\n  box: {\n    width: 120,\n    height: 120,\n    backgroundColor: \"deepskyblue\",\n    borderRadius: 10,\n    borderWidth: 1,\n    borderColor: 'white'\n  },\n  box_text: {\n    color: \"white\",\n    fontSize: 120,\n    fontWeight: \"700\",\n    textAlign: \"center\"\n  },\n  box_win: {\n    backgroundColor: \"green\"\n  },\n  box_loss: {\n    backgroundColor: \"red\"\n  }\n});\nexport default App;","map":{"version":3,"sources":["/Users/bartoszwlodarski/ReactApp/ReactApp/App.js"],"names":["React","Component","App","state","endgame","move","board","Array","result","message","pattern","WinConditions","tmpBoard","updateBoard","setState","isWinner","i","console","log","allConds","j","p","isDraw","length","isEndGame","botMove","legalMoves","loseThreads","push","Math","floor","random","onPress","pos","boxes","styles","box","box_win","box_loss","box_text","game_board","container","title","title_text","renderMessage","renderBoard","StyleSheet","create","justifyContent","alignItems","marginTop","paddingTop","height","fontSize","fontWeight","flexWrap","flexDirection","backgroundColor","maxHeight","maxWidth","alignContent","borderRadius","width","borderWidth","borderColor","color","textAlign"],"mappings":"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","sourcesContent":["import React, { Component } from 'react'\nimport {\n  StyleSheet,\n  TouchableOpacity,\n  Text,\n  View,\n} from 'react-native'\n\n\nclass App extends Component {\n  state = {\n    endgame: false,\n    move: \"O\",\n    board: new Array(9),\n    result: \"\",\n    message: \"\",\n    pattern: Array(0),\n  }\n\n  WinConditions = [\n    [0,1,2],\n    [3,4,5],\n    [6,7,8],\n    [0,3,6],\n    [1,4,7],\n    [2,5,8],\n    [0,4,8],\n    [2,4,6]\n  ];\n\n  tmpBoard = [null, null, null, null, null, null, null, null, null];\n\n  updateBoard = () => {\n      this.setState({board: this.tmpBoard});\n  }\n\n  isWinner = (board, move) => {\n    for(let i=0; i<8; i++)\n    {\n      console.log(\"Condition nr \", i, this.WinConditions[i])\n      let allConds = true;\n      for (let j=0; j<3; j++)\n      {\n        let p = this.WinConditions[i][j];\n        if(board[p] !== move)\n        {\n          allConds = false;\n          break;\n        }\n      }\n      if (allConds)\n      {\n        console.log(\"Win condition: \" + i);\n        return this.WinConditions[i];\n      } \n    }\n    \n    return false;\n\n  }\n\n  isDraw = (board) => {\n    for(let i=0; i<board.length; i++)\n    {\n      if (!board[i]) return false;\n    }\n    return true;\n\n  }\n\n  isEndGame = (board, move) => {\n    let pattern = this.isWinner(board,move)\n    if (pattern)\n    {\n      this.setState({endgame: true, pattern: pattern});\n      if (move == \"O\") this.setState({endgame: true, result: \"win\", message: \"You win!\"});\n      else this.setState({endgame: true, result: \"loss\", message: \"You lost!\"});\n      return true;\n    }\n    else if (this.isDraw(board)) this.setState({endgame: true, result: \"draw\", message: \"You draw!\"});\n    else return false;\n\n  }\n\n  botMove = () => {\n    console.log(\"Bot move board:\");\n    console.log(this.tmpBoard);\n    let legalMoves = Array();\n    let loseThreads = Array();\n    for (let i=0; i<9; i++)\n    {\n      if (!this.tmpBoard[i])\n      {\n        const board = [...this.tmpBoard];\n        board[i] = \"X\";\n        if (this.isWinner(board, \"X\"))\n        {\n          this.tmpBoard[i] = \"X\";\n          return;\n        }\n        \n        board[i] = \"O\";\n        if (this.isWinner(board, \"O\"))\n        {\n          loseThreads.push(i);\n        }\n        legalMoves.push(i);\n\n      }\n    }\n    let move = legalMoves[Math.floor(Math.random()*legalMoves.length)];\n    if (loseThreads.length > 0) move = loseThreads[Math.floor(Math.random()*loseThreads.length)];\n    this.tmpBoard[move] = \"X\";\n\n  }\n\n  onPress = (pos) => {\n    if(!this.state.endgame && !this.state.board[pos] && this.state.move == \"O\")\n    {\n      this.tmpBoard[pos] = \"O\";\n      if (this.isEndGame(this.tmpBoard, \"O\"))\n      {\n          this.updateBoard();\n          return;\n      }\n      this.botMove();\n      this.updateBoard();\n      this.isEndGame(this.tmpBoard, \"X\");\n\n    }\n  }\n\n  renderMessage(){\n    if(this.state.endgame)\n       return <Text>{this.state.message}</Text>;\n    else\n    {\n      return <Text>Move: {this.state.move}</Text>\n    }\n    return null;\n }\n\n renderBoard(){\n    let boxes = []\n    for (let i=0; i<9; i++)\n    {\n        boxes.push(\n          <TouchableOpacity style={[styles.box, \n          (this.state.result == \"win\" && i in this.state.pattern) ? styles.box_win : null, \n          (this.state.result == \"loss\" && i in this.state.pattern) ? styles.box_loss : null]} \n            onPress={() => this.onPress(i)}>\n            <Text style={styles.box_text}>{ this.state.board[i] }</Text>\n          </TouchableOpacity>\n        )\n      \n      \n    }\n    return <View style={styles.game_board}>{boxes}</View>\n }\n\n render() {\n    return (\n      <View style={styles.container}>\n        <View style={styles.title}>\n          <Text style={styles.title_text}>TicTacToe</Text>\n        </View>\n\n        <View style={styles.message}>\n          { this.renderMessage() }\n        </View>\n\n        {this.renderBoard()}\n\n      </View>\n      \n    )\n  }\n}\n\nconst styles = StyleSheet.create({\n  container:\n  {\n    justifyContent: 'center',\n    alignItems: 'center',\n  },\n\n  title:\n  {\n    marginTop: 10,\n    paddingTop: 50,\n    height: 100,\n  },\n\n  title_text:\n  {\n    fontSize: 50,\n    fontWeight: \"700\"\n  },\n\n  game_board: {\n    flexWrap: \"wrap\",\n    flexDirection: \"row\",\n    backgroundColor: \"aliceblue\",\n    maxHeight: 360,\n    marginTop: 100,\n    maxWidth: 360,\n    alignContent: 'center',\n    borderRadius: 10,\n    \n  },\n  box: {\n    width: 120,\n    height: 120,\n    backgroundColor: \"deepskyblue\",\n    borderRadius: 10,\n    borderWidth: 1,\n    borderColor: 'white',\n  },\n\n  box_text: {\n    color: \"white\",\n    fontSize: 120,\n    fontWeight: \"700\",\n    textAlign: \"center\",\n  },\n\n  box_win: {\n    backgroundColor: \"green\",\n  },\n\n  box_loss: {\n    backgroundColor: \"red\",\n  }\n\n})\n\nexport default App;\n"]},"metadata":{},"sourceType":"module"}